!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([/*!****************************!*\
  !*** ./http/host/host.jsx ***!
  \****************************/
function(e,t){"use strict";function r(e){d.children.forEach(function(t){t.id!=e&&(t.hidden=!0)}),document.getElementById(e).hidden=!1}function n(){var e=this.dataset.username;s.send(JSON.stringify({event:"removeUser",user:e})),this.parentNode.removeChild(this);for(var t=0;t<i.length;t++){var r=i[t];if(e==r){i.splice(i.indexOf(r),1);break}}}function a(){if(!l){s.send(JSON.stringify({event:"removeUserFromCrew",user:this.dataset.username}));var e=document.createElement("li");e.dataset.username=this.dataset.username,e.appendChild(document.createTextNode(this.dataset.username)),e.onclick=n,document.getElementById("loneusers").appendChild(e),this.parentNode.dataset.n--,this.parentNode.removeChild(this);for(var t in c){var r=c[t].users,a=!0,o=!1,d=void 0;try{for(var i,u=r[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var m=i.value;if(m==this.dataset.username)return void r.splice(r.indexOf(m),1)}}catch(h){o=!0,d=h}finally{try{!a&&u["return"]&&u["return"]()}finally{if(o)throw d}}}}}function o(){s.send(JSON.stringify({event:"messageRecieved"}))}var s=new WebSocket(("http:"===location.protocol?"ws://":"wss://")+location.hostname+(80!=location.port?":"+location.port:"")+"/host/"),d=document.getElementById("cont"),c={},i=[],u=void 0,l=!1;s.onmessage=function(e){try{e=JSON.parse(e.data)}catch(t){return console.log(t),sweetAlert("Socket error.","error")}switch(o(),e.event){case"ping":break;case"error":sweetAlert(e.title,e.text,"error");break;case"newGame":document.getElementById("game-code-cont").appendChild(document.createTextNode(e.id)),r("tgame");break;case"addNewUser":var s=document.createElement("li");s.dataset.username=e.user,s.appendChild(document.createTextNode(e.user)),s.onclick=n,document.getElementById("loneusers").appendChild(s),i.push(e.user);break;case"addUserToCrew":document.getElementById("loneusers").childNodes.forEach(function(t){t.firstChild.nodeValue==e.user&&t.parentNode.removeChild(t)});var d=document.createElement("span");d.dataset.username=e.user,d.className="clickable pill",d.onclick=a,d.appendChild(document.createTextNode(e.user)),document.getElementById("crews").children[e.crew-1].appendChild(d),document.getElementById("crews").children[e.crew-1].dataset.n++,e.crew in c?c[e.crew].users.push(e.user):c[e.crew]={name:"Crew "+e.crew.toString(),users:[e.user],position:0,status:"rowing",boat:"canoe"};break;case"startGame":document.getElementById("cont").hidden=!0,r("mountNode"),l=!0,u=ReactDOM.render(React.createElement(GameHost,{initialCrews:c}),document.getElementById("mountNode"));break;case"answerSelected":u.answerSelected(e.wasCorrectAnswer,e.crewNumber);break;case"whirlpoolStatusChanged":u.whirlpoolStatusChanged(e.status,e.crewNumber);break;case"removeUser":var t=document.querySelector("[data-username="+JSON.stringify(e.user)+"]");t&&t.parentNode.removeChild(t)}},s.onclose=function(){sweetAlert("Server connection died.","We're sorry about that.","error")},document.getElementById("dashboard").addEventListener("submit",function(e){document.getElementById("newGameButton").disabled=!0,e.preventDefault(),s.send(JSON.stringify({event:"newGame"}))}),document.getElementById("startGameButton").addEventListener("click",function(e){document.getElementById("startGameButton").disabled=!0,e.preventDefault(),s.send(JSON.stringify({event:"startGame"}))})}]);
//# sourceMappingURL=host.bundle.js.map