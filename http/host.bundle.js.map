{"version":3,"sources":["webpack:///webpack/bootstrap 00166583d12c05865fd1?99f7","webpack:///./http/host/host.jsx"],"names":[],"mappings":"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","file":"host.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 00166583d12c05865fd1\n **/","const socket = new WebSocket((location.protocol === 'http:' ? 'ws://' : 'wss://') + location.hostname + (location.port != 80 ? ':' + location.port : '') + '/host/');\nconst cont = document.getElementById('cont');\n\nconst crews = {};\nconst usersWithoutCrews = [];\n\nlet gameHost;\nlet gameHasStarted = false;\n\nfunction setState(id) {\n\t// hide and show different elements\n\tcont.children.forEach(function(e) {\n\t\tif (e.id != id) e.hidden = true;\n\t});\n\tdocument.getElementById(id).hidden = false;\n}\n\nfunction removeUserFromGame() {\n\tconst userToRemove = this.dataset.username;\n\tsocket.send(JSON.stringify({\n\t\tevent: 'removeUser',\n\t\tuser: userToRemove\n\t}));\n\tthis.parentNode.removeChild(this);\n\n\tfor (let i = 0; i < usersWithoutCrews.length; i++) {\n\t\tconst username = usersWithoutCrews[i];\n\t\tif (userToRemove == username) {\n\t\t\tusersWithoutCrews.splice(usersWithoutCrews.indexOf(username), 1);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction removeUserFromCrew() {\n\tif (gameHasStarted) {\n\t\treturn;\n\t}\n\tsocket.send(JSON.stringify({\n\t\tevent: 'removeUserFromCrew',\n\t\tuser: this.dataset.username\n\t}));\n\tlet li = document.createElement('li');\n\tli.dataset.username = this.dataset.username;\n\tli.appendChild(document.createTextNode(this.dataset.username));\n\tli.onclick = removeUserFromGame;\n\tdocument.getElementById('loneusers').appendChild(li);\n\tthis.parentNode.dataset.n--;\n\tthis.parentNode.removeChild(this);\n\n\tfor (let crewNumber in crews) {\n\t\tlet crewmembers = crews[crewNumber].users;\n\t\tfor (let crewmember of crewmembers) {\n\t\t\tif (crewmember == this.dataset.username) {\n\t\t\t\tcrewmembers.splice(crewmembers.indexOf(crewmember), 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction confirmMessageRecieved() {\n\tsocket.send(JSON.stringify({event: 'messageRecieved'}));\n}\n\nsocket.onmessage = function(m) {\n\ttry {\n\t\tm = JSON.parse(m.data);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\treturn sweetAlert('Socket error.', 'error');\n\t}\n\n\tconfirmMessageRecieved();\n\n\tswitch (m.event) {\n\tcase 'ping':\n\t\tbreak;\n\tcase 'error':\n\t\tsweetAlert(m.title, m.text, \"error\");\n\t\tbreak;\n\tcase 'newGame':\n\t\tdocument.getElementById('game-code-cont').appendChild(document.createTextNode(m.id));\n\t\tsetState('tgame');\n\t\tbreak;\n\tcase 'addNewUser':\n\t\tlet li = document.createElement('li');\n\t\tli.dataset.username = m.user;\n\t\tli.appendChild(document.createTextNode(m.user));\n\t\tli.onclick = removeUserFromGame;\n\t\tdocument.getElementById('loneusers').appendChild(li);\n\t\tusersWithoutCrews.push(m.user);\n\t\tbreak;\n\tcase 'addUserToCrew':\n\t\tdocument.getElementById('loneusers').childNodes.forEach(function(e) {\n\t\t\tif (e.firstChild.nodeValue == m.user) e.parentNode.removeChild(e);\n\t\t});\n\t\tlet span = document.createElement('span');\n\t\tspan.dataset.username = m.user;\n\t\tspan.className = 'clickable pill';\n\t\tspan.onclick = removeUserFromCrew;\n\t\tspan.appendChild(document.createTextNode(m.user));\n\t\tdocument.getElementById('crews').children[m.crew - 1].appendChild(span);\n\t\tdocument.getElementById('crews').children[m.crew - 1].dataset.n++;\n\t\tif (m.crew in crews) {\n\t\t\tcrews[m.crew].users.push(m.user);\n\t\t} else {\n\t\t\tcrews[m.crew] = {\n\t\t\t\tname: 'Crew ' + (m.crew).toString(),\n\t\t\t\tusers: [m.user],\n\t\t\t\tposition: 0,\n\t\t\t\tstatus: 'rowing',\n\t\t\t\tboat: 'canoe'\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 'startGame':\n\t\tdocument.getElementById('cont').hidden = true;\n\t\tsetState('mountNode');\n\t\tgameHasStarted = true;\n\t\tgameHost = ReactDOM.render(<GameHost initialCrews={crews} />, document.getElementById('mountNode'));\n\t\tbreak;\n\tcase 'answerSelected':\n\t\tgameHost.answerSelected(m.wasCorrectAnswer, m.crewNumber);\n\n\t\tbreak;\n\tcase 'whirlpoolStatusChanged':\n\t\tgameHost.whirlpoolStatusChanged(m.status, m.crewNumber);\n\t\tbreak;\n\tcase 'removeUser':\n\t\tlet e = document.querySelector('[data-username=' + JSON.stringify(m.user) + ']');\n\t\tif (e) {\n\t\t\te.parentNode.removeChild(e);\n\t\t\t// if (e.parentNode.dataset.n) e.parentNode.dataset.n--;\n\t\t}\n\t\tbreak;\n\t}\n};\n\nsocket.onclose = () => {\n\tsweetAlert(\"Server connection died.\", \"We're sorry about that.\", \"error\");\n};\ndocument.getElementById('dashboard').addEventListener('submit', function(e) {\n\tdocument.getElementById('newGameButton').disabled = true;\n\te.preventDefault();\n\tsocket.send(JSON.stringify({event: 'newGame'}));\n});\n\ndocument.getElementById('startGameButton').addEventListener('click', function(e) {\n\tdocument.getElementById('startGameButton').disabled = true;\n\te.preventDefault();\n\tsocket.send(JSON.stringify({\n\t\tevent: 'startGame'\n\t}));\n\t// MARK: figure out our html\n});\nfunction endGame() {\n    socket.send(JSON.stringify({\n        event: 'endGame'\n    }));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./http/host/host.jsx\n **/"],"sourceRoot":""}